# BoonLink Payment System Architecture

## æ¦‚è¿°

BoonLink æ˜¯ä¸€ä¸ªåŸºäº OpenClaw çš„åŠ å¯†è´§å¸åˆ° PromptPay å³æ—¶æ”¯ä»˜ç³»ç»Ÿï¼Œä¸“ä¸ºæ¸…è¿ˆåœ°åŒºè®¾è®¡ï¼Œæ”¯æŒå¼±ç½‘ç¯å¢ƒä¸‹çš„ç¦»çº¿ç­¾åå’Œå»¶è¿Ÿç»“ç®—ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BoonLink Payment Flow                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Customer â”‚â”€â”€â”€â–¶â”‚   Moltbot    â”‚â”€â”€â”€â–¶â”‚  BoonLink    â”‚â”€â”€â”€â–¶â”‚ Merchant â”‚  â”‚
â”‚  â”‚ Telegram â”‚    â”‚  (OpenClaw)  â”‚    â”‚  Extension   â”‚    â”‚ PromptPayâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                â”‚                    â”‚                  â”‚        â”‚
â”‚       â”‚   1. Send QR   â”‚                    â”‚                  â”‚        â”‚
â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  2. Parse QR       â”‚                  â”‚        â”‚
â”‚       â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚        â”‚
â”‚       â”‚                â”‚  3. Get Quote      â”‚                  â”‚        â”‚
â”‚       â”‚                â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚        â”‚
â”‚       â”‚  4. Show Card  â”‚                    â”‚                  â”‚        â”‚
â”‚       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚        â”‚
â”‚       â”‚  5. Confirm    â”‚                    â”‚                  â”‚        â”‚
â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  6. Sign TX        â”‚                  â”‚        â”‚
â”‚       â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚        â”‚
â”‚       â”‚                â”‚                    â”‚  7. Settlement   â”‚        â”‚
â”‚       â”‚                â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚        â”‚
â”‚       â”‚  8. Receipt    â”‚                    â”‚                  â”‚        â”‚
â”‚       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç³»ç»Ÿæ¶æ„

### 1. ç›®å½•ç»“æ„

```
chaingmai/
â”œâ”€â”€ extensions/
â”‚   â””â”€â”€ boonlink-pay/              # ä¸»æ”¯ä»˜æ‰©å±•
â”‚       â”œâ”€â”€ openclaw.plugin.json   # æ’ä»¶é…ç½®
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ index.ts               # å…¥å£
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ tools/             # AI Tools
â”‚           â”‚   â”œâ”€â”€ scan-qr.ts     # äºŒç»´ç è§£æ
â”‚           â”‚   â”œâ”€â”€ get-quote.ts   # æ±‡ç‡æŠ¥ä»·
â”‚           â”‚   â””â”€â”€ confirm-pay.ts # æ”¯ä»˜ç¡®è®¤
â”‚           â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚           â”‚   â”œâ”€â”€ promptpay.ts   # PromptPay åè®®
â”‚           â”‚   â”œâ”€â”€ exchange.ts    # æ±‡ç‡æœåŠ¡ (Mock)
â”‚           â”‚   â”œâ”€â”€ blockchain.ts  # é“¾ä¸Šäº¤äº’
â”‚           â”‚   â””â”€â”€ settlement.ts  # ç»“ç®—æœåŠ¡
â”‚           â”œâ”€â”€ offline/           # ç¦»çº¿æ”¯æŒ
â”‚           â”‚   â”œâ”€â”€ queue.ts       # ç­¾åé˜Ÿåˆ—
â”‚           â”‚   â”œâ”€â”€ sync.ts        # åŒæ­¥æœºåˆ¶
â”‚           â”‚   â””â”€â”€ storage.ts     # SQLite å­˜å‚¨
â”‚           â”œâ”€â”€ ui/                # A2UI å¡ç‰‡
â”‚           â”‚   â”œâ”€â”€ checkout.ts    # æ”¶é“¶å°
â”‚           â”‚   â”œâ”€â”€ confirm.ts     # ç¡®è®¤é¡µ
â”‚           â”‚   â””â”€â”€ receipt.ts     # æ”¶æ®
â”‚           â””â”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚               â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ skills/
â”‚   â””â”€â”€ boonlink/                  # Skill å®šä¹‰
â”‚       â””â”€â”€ SKILL.md
â”‚
â””â”€â”€ packages/
    â””â”€â”€ boonlink-contracts/        # æ™ºèƒ½åˆçº¦ (å¯é€‰)
        â”œâ”€â”€ contracts/
        â””â”€â”€ scripts/
```

### 2. æ ¸å¿ƒç»„ä»¶

#### 2.1 æ”¯ä»˜æµç¨‹çŠ¶æ€æœº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INIT   â”‚â”€â”€â”€â”€â–¶â”‚ QUOTED  â”‚â”€â”€â”€â”€â–¶â”‚ SIGNED  â”‚â”€â”€â”€â”€â–¶â”‚ PENDING â”‚â”€â”€â”€â”€â–¶â”‚ SETTLED â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚               â”‚               â”‚
     â”‚               â”‚               â”‚               â”‚               â”‚
     â–¼               â–¼               â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXPIRED â”‚     â”‚CANCELLEDâ”‚     â”‚ FAILED  â”‚     â”‚ TIMEOUT â”‚     â”‚COMPLETEDâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2 ç¦»çº¿ç­¾åé˜Ÿåˆ— (Offline-First)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Offline Queue Architecture                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Local     â”‚      â”‚   Signed    â”‚      â”‚   Pending   â”‚        â”‚
â”‚  â”‚   Wallet    â”‚â”€â”€â”€â”€â”€â–¶â”‚   TX Queue  â”‚â”€â”€â”€â”€â”€â–¶â”‚   Sync      â”‚        â”‚
â”‚  â”‚   (SQLite)  â”‚      â”‚   (SQLite)  â”‚      â”‚   Service   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                    â”‚                    â”‚                 â”‚
â”‚        â”‚                    â”‚                    â”‚                 â”‚
â”‚        â–¼                    â–¼                    â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                   Network Status Monitor                 â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚  â”‚  â”‚ Online  â”‚  â”‚ Weak    â”‚  â”‚ Offline â”‚  â”‚ Sync    â”‚    â”‚      â”‚
â”‚  â”‚  â”‚ Mode    â”‚  â”‚ Signal  â”‚  â”‚ Mode    â”‚  â”‚ Pending â”‚    â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¦»çº¿ç­–ç•¥:**
1. **å³æ—¶ç­¾å**: ç”¨æˆ·åœ¨æœ¬åœ°å®Œæˆäº¤æ˜“ç­¾å
2. **é˜Ÿåˆ—å­˜å‚¨**: ç­¾ååçš„äº¤æ˜“å­˜å…¥ SQLite é˜Ÿåˆ—
3. **æ™ºèƒ½åŒæ­¥**: ç½‘ç»œæ¢å¤åè‡ªåŠ¨æ‰¹é‡æäº¤
4. **æ”¶æ®é¢„ç”Ÿæˆ**: ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿèƒ½ç”Ÿæˆä¸´æ—¶æ”¶æ®

### 3. æŠ€æœ¯å®ç°

#### 3.1 æ”¯æŒçš„åŠ å¯†è´§å¸

| Token | Network | Contract Address | Decimals |
|-------|---------|------------------|----------|
| USDT  | BSC     | 0x55d398...      | 18       |
| USDC  | BSC     | 0x8ac76...       | 18       |
| ETH   | BSC     | Native          | 18       |

*é€‰æ‹© BSC å› ä¸º Gas è´¹ä½ï¼Œé€‚åˆå°é¢æ”¯ä»˜*

#### 3.2 æ±‡ç‡è·å–

```typescript
interface QuoteSource {
  name: string;
  priority: number;
  getRate(token: string, fiat: string): Promise<number>;
}

// æ±‡ç‡æ¥æºä¼˜å…ˆçº§
const QUOTE_SOURCES: QuoteSource[] = [
  { name: 'bitkub', priority: 1 },      // æ³°å›½æœ¬åœ°äº¤æ˜“æ‰€
  { name: 'binance', priority: 2 },      // å¤‡é€‰
  { name: 'coingecko', priority: 3 },    // å…è´¹ API
  { name: 'mock', priority: 99 },        // æ¼”ç¤ºç”¨
];
```

#### 3.3 PromptPay äºŒç»´ç æ ¼å¼

```
PromptPay QR Payload (EMVCo Standard):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 00 02 01                 # Payload Format        â”‚
â”‚ 01 02 12                 # POI Method            â”‚
â”‚ 29 XX                    # Merchant Account      â”‚
â”‚    00 16 A000000677010111    # AID               â”‚
â”‚    01 13 00669XXXXXXXXXX     # Phone/National ID â”‚
â”‚ 53 03 764                # Currency (THB)        â”‚
â”‚ 54 XX AMOUNT             # Transaction Amount    â”‚
â”‚ 58 02 TH                 # Country               â”‚
â”‚ 63 04 XXXX               # CRC16 Checksum        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. A2UI å¡ç‰‡è®¾è®¡

#### 4.1 æ”¶é“¶å°å¡ç‰‡ (Checkout Card)

```json
{
  "type": "card",
  "title": "BoonLink Payment",
  "content": [
    {
      "type": "header",
      "icon": "ğŸ’³",
      "title": "æ”¯ä»˜åˆ° Coffee Shop",
      "subtitle": "PromptPay: 098-xxx-xxxx"
    },
    {
      "type": "divider"
    },
    {
      "type": "info_row",
      "label": "é‡‘é¢",
      "value": "à¸¿150.00 THB"
    },
    {
      "type": "info_row",
      "label": "æ±‡ç‡",
      "value": "1 USDT = à¸¿35.50"
    },
    {
      "type": "info_row",
      "label": "éœ€æ”¯ä»˜",
      "value": "4.23 USDT",
      "highlight": true
    },
    {
      "type": "token_selector",
      "options": ["USDT", "USDC", "ETH"],
      "selected": "USDT"
    },
    {
      "type": "actions",
      "buttons": [
        { "label": "ç¡®è®¤æ”¯ä»˜", "action": "confirm", "style": "primary" },
        { "label": "å–æ¶ˆ", "action": "cancel", "style": "secondary" }
      ]
    }
  ]
}
```

#### 4.2 æ”¶æ®å¡ç‰‡ (Receipt Card)

```json
{
  "type": "card",
  "title": "Payment Success",
  "content": [
    {
      "type": "status",
      "icon": "âœ…",
      "text": "æ”¯ä»˜æˆåŠŸ"
    },
    {
      "type": "receipt",
      "merchant": "Coffee Shop",
      "amount_thb": "à¸¿150.00",
      "amount_crypto": "4.23 USDT",
      "tx_hash": "0x1234...abcd",
      "timestamp": "2025-01-30 14:30:00"
    },
    {
      "type": "qr_code",
      "data": "boonlink://receipt/xxx"
    }
  ]
}
```

### 5. ä¸ OpenClaw/Moltbot é›†æˆ

#### 5.1 Tool æ³¨å†Œ

```typescript
// extensions/boonlink-pay/src/tools/index.ts
export const boonlinkTools = {
  scan_promptpay_qr: {
    name: 'scan_promptpay_qr',
    description: 'è§£æ PromptPay äºŒç»´ç å›¾ç‰‡ï¼Œæå–å•†æˆ·ä¿¡æ¯å’Œé‡‘é¢',
    parameters: {
      type: 'object',
      properties: {
        image_url: { type: 'string', description: 'äºŒç»´ç å›¾ç‰‡ URL' }
      },
      required: ['image_url']
    },
    handler: scanPromptPayQR
  },

  get_crypto_quote: {
    name: 'get_crypto_quote',
    description: 'è·å–åŠ å¯†è´§å¸åˆ°æ³°é“¢çš„å®æ—¶æ±‡ç‡æŠ¥ä»·',
    parameters: {
      type: 'object',
      properties: {
        amount_thb: { type: 'number' },
        token: { type: 'string', enum: ['USDT', 'USDC', 'ETH'] }
      },
      required: ['amount_thb', 'token']
    },
    handler: getCryptoQuote
  },

  confirm_payment: {
    name: 'confirm_payment',
    description: 'ç¡®è®¤å¹¶æ‰§è¡ŒåŠ å¯†è´§å¸æ”¯ä»˜',
    parameters: {
      type: 'object',
      properties: {
        order_id: { type: 'string' },
        wallet_address: { type: 'string' }
      },
      required: ['order_id', 'wallet_address']
    },
    handler: confirmPayment
  }
};
```

#### 5.2 åª’ä½“ç†è§£é›†æˆ

```typescript
// åˆ©ç”¨ OpenClaw çš„ media-understanding æ¨¡å—
import { MediaUnderstanding } from '@openclaw/core';

async function processPaymentImage(imageUrl: string) {
  const result = await MediaUnderstanding.analyze(imageUrl, {
    extractText: true,      // OCR
    detectQRCode: true,     // äºŒç»´ç æ£€æµ‹
    context: 'payment'      // æ”¯ä»˜åœºæ™¯ä¸Šä¸‹æ–‡
  });

  if (result.qrCode) {
    return parsePromptPayPayload(result.qrCode.data);
  }

  // å¦‚æœ QR æ£€æµ‹å¤±è´¥ï¼Œå°è¯• OCR æå–ä¿¡æ¯
  return extractPaymentInfoFromText(result.text);
}
```

### 6. å®‰å…¨è€ƒè™‘

#### 6.1 ç§é’¥ç®¡ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Key Management Flow                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Option A: WalletConnect (æ¨è)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ BoonLink â”‚â”€â”€â”€â–¶â”‚WalletConnâ”‚â”€â”€â”€â–¶â”‚MetaMask/ â”‚              â”‚
â”‚  â”‚ Extensionâ”‚    â”‚  Bridge  â”‚    â”‚TrustWalletâ”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Option B: Account Abstraction (AA)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ BoonLink â”‚â”€â”€â”€â–¶â”‚  AA SDK  â”‚â”€â”€â”€â–¶â”‚  Smart   â”‚              â”‚
â”‚  â”‚ Extensionâ”‚    â”‚(Biconomy)â”‚    â”‚  Wallet  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚  Option C: Local Encrypted (ç¦»çº¿ä¼˜å…ˆ)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ BoonLink â”‚â”€â”€â”€â–¶â”‚ SQLite   â”‚â”€â”€â”€â–¶â”‚ Hardware â”‚              â”‚
â”‚  â”‚ Extensionâ”‚    â”‚ Encryptedâ”‚    â”‚ Keystore â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6.2 äº¤æ˜“éªŒè¯

- **é‡‘é¢é™åˆ¶**: å•ç¬”æœ€å¤§ 10,000 THB
- **é¢‘ç‡é™åˆ¶**: æ¯å°æ—¶æœ€å¤š 10 ç¬”
- **äºŒæ¬¡ç¡®è®¤**: å¤§é¢äº¤æ˜“éœ€è¦é¢å¤–ç¡®è®¤
- **åœ°å€ç™½åå•**: ä»…æ”¯ä»˜ç»™å·²éªŒè¯çš„ PromptPay è´¦æˆ·

### 7. æ¼”ç¤ºæ¨¡å¼ (Hackathon)

```typescript
// ä½¿ç”¨ Mock æœåŠ¡è¿›è¡Œæ¼”ç¤º
const DEMO_MODE = process.env.BOONLINK_DEMO === 'true';

const exchangeService = DEMO_MODE
  ? new MockExchangeService()    // å›ºå®šæ±‡ç‡ï¼Œæ¨¡æ‹Ÿå»¶è¿Ÿ
  : new BitkubExchangeService(); // çœŸå® API

const settlementService = DEMO_MODE
  ? new MockSettlementService()  // æ¨¡æ‹Ÿ PromptPay è½¬è´¦
  : new PromptPaySettlementService();
```

### 8. å¼€å‘è·¯çº¿å›¾

```
Phase 1: MVP (Hackathon)
â”œâ”€â”€ [x] æ¶æ„è®¾è®¡
â”œâ”€â”€ [ ] äºŒç»´ç è§£æ
â”œâ”€â”€ [ ] Mock æ±‡ç‡æœåŠ¡
â”œâ”€â”€ [ ] A2UI å¡ç‰‡æ¸²æŸ“
â””â”€â”€ [ ] åŸºç¡€æ”¯ä»˜æµç¨‹

Phase 2: Alpha
â”œâ”€â”€ [ ] çœŸå®äº¤æ˜“æ‰€ API
â”œâ”€â”€ [ ] WalletConnect é›†æˆ
â”œâ”€â”€ [ ] ç¦»çº¿é˜Ÿåˆ—æœºåˆ¶
â””â”€â”€ [ ] å•†æˆ·ç®¡ç†åå°

Phase 3: Production
â”œâ”€â”€ [ ] PromptPay API å¯¹æ¥
â”œâ”€â”€ [ ] KYC/AML åˆè§„
â”œâ”€â”€ [ ] å¤šè¯­è¨€æ”¯æŒ
â””â”€â”€ [ ] æ€§èƒ½ä¼˜åŒ–
```

---

## å¿«é€Ÿå¼€å§‹

```bash
# 1. å…‹éš† OpenClaw
git clone https://github.com/openclaw/openclaw.git
cd openclaw

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. å¤åˆ¶ BoonLink æ‰©å±•
cp -r /path/to/chaingmai/extensions/boonlink-pay extensions/

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# æ·»åŠ  BOONLINK_DEMO=true

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

## è”ç³»æ–¹å¼

- GitHub: [openclaw/openclaw](https://github.com/openclaw/openclaw)
- Hackathon: Chiang Mai Local Payment Challenge 2025
